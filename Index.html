<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Para mi Maby ‚ù§Ô∏è</title>
  <meta name="description" content="Una carta animada que se despliega con cari√±o." />
  <style>
    :root{
      --bg: #ffeef3;
      --paper: #fffaf5;
      --envelope: #ff7aa2;
      --envelope-dark:#ff5e90;
      --shadow: rgba(0,0,0,.08);
      --text: #3a2a2a;
      --accent: #ff3366;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      display:grid;
      place-items:center;
      background: radial-gradient(1200px 800px at 70% -10%, #fff 0%, var(--bg) 60%);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
    }

    .stage{
      width:min(480px, 92vw);
      aspect-ratio: 4 / 3;
      position:relative;
      display:flex;align-items:center;justify-content:center;
      perspective: 1200px;
    }

    /* Floating hearts background */
    .hearts{
      position:absolute; inset:0; overflow:hidden; pointer-events:none;
      filter: drop-shadow(0 6px 6px var(--shadow));
    }
    .heart{position:absolute; width:16px; height:16px; transform:rotate(45deg);
      animation: floatUp var(--dur) linear var(--delay) infinite;
    }
    .heart:before,.heart:after{
      content:""; position:absolute; width:16px; height:16px; background:var(--accent);
      border-radius:50%;
    }
    .heart:before{left:-8px}
    .heart:after{top:-8px}
    @keyframes floatUp{
      0%{transform:translateY(20px) rotate(45deg) scale(.8); opacity:.0}
      10%{opacity:.9}
      100%{transform:translateY(-120%) rotate(45deg) scale(1.1); opacity:0}
    }

    /* Envelope */
    .envelope{
      position:relative; width: 86%; max-width:520px; aspect-ratio: 4/2.6;
      filter: drop-shadow(0 18px 24px var(--shadow));
    }
    .env-body{
      position:absolute; inset:0; background:linear-gradient(180deg,var(--envelope) 0%, var(--envelope-dark) 100%);
      border-radius:16px; overflow:hidden;
    }
    /* bottom flap */
    .env-bottom{
      position:absolute; left:0; right:0; bottom:0; height:60%;
      background:linear-gradient(180deg,var(--envelope-dark), var(--envelope));
      clip-path: polygon(0 0, 100% 0, 50% 100%);
    }
    /* side flaps */
    .env-left,.env-right{
      position:absolute; top:0; bottom:0; width:52%; background:var(--envelope);
      clip-path: polygon(0 0, 100% 50%, 0 100%);
    }
    .env-right{ right:0; left:auto; transform: scaleX(-1);}

    /* top flap */
    .env-top{
      position:absolute; left:0; right:0; top:0; height:64%;
      background:linear-gradient(180deg,#ffa1bf, var(--envelope));
      clip-path: polygon(50% 0, 100% 100%, 0 100%);
      transform-origin: top center;
      transform: rotateX(0deg);
      box-shadow: inset 0 -8px 16px rgba(0,0,0,.06);
    }

    /* Letter */
    .letter{
      position:absolute; left:6%; right:6%; bottom:8%; height:72%;
      background:var(--paper);
      border-radius:12px; padding:22px 20px; 
      box-shadow: 0 10px 28px rgba(0,0,0,.12);
      transform: translateY(40%);
      opacity:0;
    }

    .message{
      height:100%; overflow:auto; 
      mask-image: linear-gradient(180deg, #000 85%, transparent 100%);
    }

    h1{margin:0 0 10px; font-size:clamp(22px, 5vw, 28px)}
    p{margin:0 0 10px; line-height:1.55}
    .signature{margin-top:8px; font-style:italic; opacity:.9}

    /* CTA */
    .cta{position:absolute; bottom:-58px; left:50%; transform:translateX(-50%);
      display:flex; gap:10px;
    }
    button{padding:10px 14px; border-radius:999px; border:none; cursor:pointer; font-weight:600;
      background:#111; color:#fff; box-shadow:0 8px 18px var(--shadow);
    }
    button.secondary{background:#fff; color:#111; border:1px solid #ddd}

    /* Animation states */
    .open .env-top{ animation: openFlap 1.2s ease forwards .4s; }
    .open .letter{ animation: slideLetter 1.3s cubic-bezier(.2,.8,.2,1) forwards 1s; }

    @keyframes openFlap{
      0%{ transform: rotateX(0deg) }
      45%{ transform: rotateX(-130deg) }
      100%{ transform: rotateX(-178deg) }
    }
    @keyframes slideLetter{
      0%{ transform: translateY(40%); opacity:0 }
      60%{ opacity:1 }
      100%{ transform: translateY(-16%); opacity:1 }
    }

    /* small screens */
    @media (max-width:420px){
      .letter{padding:18px}
      .cta{bottom:-52px}
    }
  </style>
</head>
<body>
  <main class="stage" id="stage">
    <div class="hearts" aria-hidden="true"></div>

    <div class="envelope" aria-label="Sobre con carta">
      <div class="env-body" aria-hidden="true"></div>
      <div class="env-left" aria-hidden="true"></div>
      <div class="env-right" aria-hidden="true"></div>
      <div class="env-bottom" aria-hidden="true"></div>
      <div class="env-top" aria-hidden="true"></div>

      <article class="letter" role="dialog" aria-live="polite">
        <div class="message">
          <h1>Para mi Maby ‚ú®</h1>
          <p>
            Amor m√≠o, s√© que hoy fue un d√≠a pesado y que te sientes cansada, pero quiero recordarte lo incre√≠ble que eres. Tu fuerza, tu ternura y esa luz que llevas dentro hacen que todo valga la pena. No dejes que un mal d√≠a apague tu sonrisa, porque tu sonrisa es mi lugar favorito. üåπüíõ
          </p>
          <p>
            Descansa, mi vida, y recuerda que siempre estar√© aqu√≠ para ti, para abrazarte fuerte, escucharte y hacerte sentir cu√°nto te amo.
          </p>
          <p>
            Eres mi raz√≥n de alegr√≠a todos los d√≠as, Maribel.
          </p>
          <p class="signature">‚Äî Con amor, Mario</p>
        </div>
      </article>
    </div>

    <div class="cta">
      <button id="replay">Reproducir</button>
      <button class="secondary" id="share">Compartir</button>
    </div>
  </main>

  <script>
    // Auto-open animation on load
    const stage = document.getElementById('stage');
    const replay = document.getElementById('replay');
    const shareBtn = document.getElementById('share');

    function seedHearts(){
      const wrap = document.querySelector('.hearts');
      wrap.innerHTML = '';
      const N = 22;
      for(let i=0;i<N;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        const left = Math.random()*100;
        h.style.left = left + '%';
        h.style.bottom = (-10 + Math.random()*30) + 'px';
        h.style.setProperty('--dur', (4 + Math.random()*5)+'s');
        h.style.setProperty('--delay', (Math.random()*4)+'s');
        wrap.appendChild(h);
      }
    }

    function openOnce(){
      // trigger animation by toggling class
      requestAnimationFrame(() => stage.classList.add('open'));
    }

    function replayAnim(){
      stage.classList.remove('open');
      void stage.offsetWidth; // reflow to reset animations
      seedHearts();
      openOnce();
    }

    replay.addEventListener('click', replayAnim);

    shareBtn.addEventListener('click', async () => {
      const shareData = {
        title: 'Para mi Maby ‚ù§Ô∏è',
        text: 'Abr√≠ este sobre‚Ä¶ hay algo para ti.',
        url: window.location.href
      };
      try{
        if(navigator.share){
          await navigator.share(shareData);
        }else{
          await navigator.clipboard.writeText(window.location.href);
          shareBtn.textContent = 'Enlace copiado ‚úì';
          setTimeout(()=> shareBtn.textContent = 'Compartir', 1600);
        }
      }catch(e){
        console.log(e);
      }
    });

    // init
    seedHearts();
    openOnce();
  </script>
</body>
</html>
